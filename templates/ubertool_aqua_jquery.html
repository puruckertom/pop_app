<script type="text/javascript" src=" ../stylesheets/jquery.validate.js"></script>
<script>
$(document).ready(function() {
	$.ajax({
		url:"{{ubertool_service_url}}/ubertool/aqua/config_names",
		async: true,
		type: 'GET',
		success: function(config_names) {
			if(config_names != null)
			{
				$("#id_user_aqua_configuration").append(new Option('None', 'None'));
				for(i = 0; i < config_names.length; i++)
				{
					var config_name = config_names[i];
					$("#id_user_aqua_configuration").append(new Option(config_name, config_name));
				}
			}
		}
	});

	$("#id_user_aqua_configuration").change(function(){
		var user_aqua_configuration = $("#id_user_aqua_configuration")[0].value;

		if(user_aqua_configuration != 'None')
		{
			$.ajax({
				url:"{{ubertool_service_url}}/ubertool/aqua/"+user_aqua_configuration,
				async: false,
				type: 'GET',
				success: function(aqua_data) {
					$("#id_config_name")[0].value = $("#id_user_aqua_configuration")[0].value;
					$("#id_duckweed")[0].value = aqua_data['duckweed'];
					$("#id_mai")[0].value = aqua_data['mai'];
					$("#id_a")[0].value = aqua_data['a'];
					$("#id_dsed")[0].value = aqua_data['dsed'];
					$("#id_pb")[0].value = aqua_data['pb'];
					$("#id_dw")[0].value = aqua_data['dw'];
					$("#id_osed")[0].value = aqua_data['osed'];
					$("#id_kd")[0].value = aqua_data['kd'];
					$("#id_msed")[0].value = aqua_data['msed'];
					$("#id_vw")[0].value = aqua_data['vw'];
					$("#id_mai1")[0].value = aqua_data['mai1'];
					$("#id_cw")[0].value = aqua_data['cw'];
					$("#id_lf_p_sediment")[0].value = aqua_data['lf_p_sediment'];
					$("#id_lf_p_phytoplankton")[0].value = aqua_data['lf_p_phytoplankton'];
					$("#id_lf_p_zooplankton")[0].value = aqua_data['lf_p_zooplankton'];
					$("#id_lf_p_benthic_invertebrates")[0].value = aqua_data['lf_p_benthic_invertebrates'];
					$("#id_lf_p_filter_feeders")[0].value = aqua_data['lf_p_filter_feeders'];
					$("#id_lf_p_small_fish")[0].value = aqua_data['lf_p_small_fish'];
					$("#id_lf_p_medium_fish")[0].value = aqua_data['lf_p_medium_fish'];
					$("#id_mf_p_sediment")[0].value = aqua_data['mf_p_sediment'];
					$("#id_mf_p_phytoplankton")[0].value = aqua_data['mf_p_phytoplankton'];
					$("#id_mf_p_zooplankton")[0].value = aqua_data['mf_p_zooplankton'];
					$("#id_mf_p_benthic_invertebrates")[0].value = aqua_data['mf_p_benthic_invertebrates'];
					$("#id_mf_p_filter_feeders")[0].value = aqua_data['mf_p_filter_feeders'];
					$("#id_mf_p_small_fish")[0].value = aqua_data['mf_p_small_fish'];
					$("#id_sf_p_sediment")[0].value = aqua_data['sf_p_sediment'];
					$("#id_sf_p_phytoplankton")[0].value = aqua_data['sf_p_phytoplankton'];
					$("#id_sf_p_zooplankton")[0].value = aqua_data['sf_p_zooplankton'];
					$("#id_sf_p_benthic_invertebrates")[0].value = aqua_data['sf_p_benthic_invertebrates'];
					$("#id_sf_p_filter_feeders")[0].value = aqua_data['sf_p_filter_feeders'];
					$("#id_ff_p_sediment")[0].value = aqua_data['ff_p_sediment'];
					$("#id_ff_p_phytoplankton")[0].value = aqua_data['ff_p_phytoplankton'];
					$("#id_ff_p_zooplankton")[0].value = aqua_data['ff_p_zooplankton'];
					$("#id_ff_p_benthic_invertebrates")[0].value = aqua_data['ff_p_benthic_invertebrates'];
					$("#id_beninv_p_sediment")[0].value = aqua_data['beninv_p_sediment'];
					$("#id_beninv_p_phytoplankton")[0].value = aqua_data['beninv_p_phytoplankton'];
					$("#id_beninv_p_zooplankton")[0].value = aqua_data['beninv_p_zooplankton'];
					$("#id_zoo_p_sediment")[0].value = aqua_data['zoo_p_sediment'];
					$("#id_zoo_p_phytoplankton")[0].value = aqua_data['zoo_p_phytoplankton'];
					$("#id_s_lipid")[0].value = aqua_data['s_lipid'];
					$("#id_s_NLOM")[0].value = aqua_data['s_NLOM'];
					$("#id_s_water")[0].value = aqua_data['s_water'];
					$("#id_v_lb_phytoplankton")[0].value = aqua_data['v_lb_phytoplankton'];
					$("#id_v_nb_phytoplankton")[0].value = aqua_data['v_nb_phytoplankton'];
					$("#id_v_wb_phytoplankton")[0].value = aqua_data['v_wb_phytoplankton'];
					$("#id_v_lb_zoo")[0].value = aqua_data['v_lb_zoo'];
					$("#id_v_nb_zoo")[0].value = aqua_data['v_nb_zoo'];
					$("#id_v_wb_zoo")[0].value = aqua_data['v_wb_zoo'];
					$("#id_v_lb_beninv")[0].value = aqua_data['v_lb_beninv'];
					$("#id_v_nb_beninv")[0].value = aqua_data['v_nb_beninv'];
					$("#id_v_wb_beninv")[0].value = aqua_data['v_wb_beninv'];
					$("#id_v_lb_ff")[0].value = aqua_data['v_lb_ff'];
					$("#id_v_nb_ff")[0].value = aqua_data['v_nb_ff'];
					$("#id_v_wb_ff")[0].value = aqua_data['v_wb_ff'];
					$("#id_v_lb_sf")[0].value = aqua_data['v_lb_sf'];
					$("#id_v_nb_sf")[0].value = aqua_data['v_nb_sf'];
					$("#id_v_wb_sf")[0].value = aqua_data['v_wb_sf'];
					$("#id_v_lb_mf")[0].value = aqua_data['v_lb_mf'];
					$("#id_v_nb_mf")[0].value = aqua_data['v_nb_mf'];
					$("#id_v_wb_mf")[0].value = aqua_data['v_wb_mf'];
					$("#id_v_lb_lf")[0].value = aqua_data['v_lb_lf'];
					$("#id_v_nb_lf")[0].value = aqua_data['v_nb_lf'];
					$("#id_v_wb_lf")[0].value = aqua_data['v_wb_lf'];
					$("#id_k1_phytoplankton")[0].value = aqua_data['k1_phytoplankton'];
					$("#id_k2_phytoplankton")[0].value = aqua_data['k2_phytoplankton'];
					$("#id_ke_phytoplankton")[0].value = aqua_data['ke_phytoplankton'];
					$("#id_kd_phytoplankton")[0].value = aqua_data['kd_phytoplankton'];
					$("#id_km_phytoplankton")[0].value = aqua_data['km_phytoplankton'];
					$("#id_k1_zoo")[0].value = aqua_data['k1_zoo'];
					$("#id_k2_zoo")[0].value = aqua_data['k2_zoo'];
					$("#id_ke_zoo")[0].value = aqua_data['ke_zoo'];
					$("#id_kd_zoo")[0].value = aqua_data['kd_zoo'];
					$("#id_km_zoo")[0].value = aqua_data['km_zoo'];
					$("#id_k1_beninv")[0].value = aqua_data['k1_beninv'];
					$("#id_k2_beninv")[0].value = aqua_data['k2_beninv'];
					$("#id_ke_beninv")[0].value = aqua_data['ke_beninv'];
					$("#id_kd_beninv")[0].value = aqua_data['kd_beninv'];
					$("#id_km_beninv")[0].value = aqua_data['km_beninv'];
					$("#id_k1_ff")[0].value = aqua_data['k1_ff'];
					$("#id_k2_ff")[0].value = aqua_data['k2_ff'];
					$("#id_ke_ff")[0].value = aqua_data['ke_ff'];
					$("#id_kd_ff")[0].value = aqua_data['kd_ff'];
					$("#id_km_ff")[0].value = aqua_data['km_ff'];
					$("#id_k1_sf")[0].value = aqua_data['k1_sf'];
					$("#id_k2_sf")[0].value = aqua_data['k2_sf'];
					$("#id_ke_sf")[0].value = aqua_data['ke_sf'];
					$("#id_kd_sf")[0].value = aqua_data['kd_sf'];
					$("#id_km_sf")[0].value = aqua_data['km_sf'];
					$("#id_k1_mf")[0].value = aqua_data['k1_mf'];
					$("#id_k2_mf")[0].value = aqua_data['k2_mf'];
					$("#id_ke_mf")[0].value = aqua_data['ke_mf'];
					$("#id_kd_mf")[0].value = aqua_data['kd_mf'];
					$("#id_km_mf")[0].value = aqua_data['km_mf'];
					$("#id_k1_lf")[0].value = aqua_data['k1_lf'];
					$("#id_k2_lf")[0].value = aqua_data['k2_lf'];
					$("#id_ke_lf")[0].value = aqua_data['ke_lf'];
					$("#id_kd_lf")[0].value = aqua_data['kd_lf'];
					$("#id_km_lf")[0].value = aqua_data['km_lf'];
					$("#id_s_respire")[0].value = aqua_data['s_respire'];
					$("#id_phyto_respire")[0].value = aqua_data['phyto_respire'];
					$("#id_zoo_respire")[0].value = aqua_data['zoo_respire'];
					$("#id_beninv_respire")[0].value = aqua_data['beninv_respire'];
					$("#id_ff_respire")[0].value = aqua_data['ff_respire'];
					$("#id_sfish_respire")[0].value = aqua_data['sfish_respire'];
					$("#id_mfish_respire")[0].value = aqua_data['mfish_respire'];
					$("#id_lfish_respire")[0].value = aqua_data['lfish_respire'];
					$("#id_kg_phytoplankton")[0].value = aqua_data['kg_phytoplankton'];
					$("#id_mp_phytoplankton")[0].value = aqua_data['mp_phytoplankton'];
					$("#id_mo_phytoplankton")[0].value = aqua_data['mo_phytoplankton'];
				}
			});
		}
		
	});
})
function submitAquaConfiguration()
{
	var document_form = document.forms[0];
	var form_data = {};
	for(i = 1; i < document_form.length-2; i++)
	{
		var id = (document_form[i].id).replace("id_","");
		var val = document_form[i].value;
		form_data[id] = val;
	}
	form_data['created'] = getDateTime(); 
	$.ajax({
		url:"{{ubertool_service_url}}/ubertool/aqua/"+$("#id_config_name")[0].value,
		async: true,
		type: 'POST',
		data: JSON.stringify(form_data)
	});
	window.location = "terrestrial_toxicity.html";

}

function getDateTime() {

    var date = new Date();

    var hour = date.getHours();
    hour = (hour < 10 ? "0" : "") + hour;

    var min  = date.getMinutes();
    min = (min < 10 ? "0" : "") + min;

    var sec  = date.getSeconds();
    sec = (sec < 10 ? "0" : "") + sec;

    var year = date.getFullYear();

    var month = date.getMonth() + 1;
    month = (month < 10 ? "0" : "") + month;

    var day  = date.getDate();
    day = (day < 10 ? "0" : "") + day;

    return year + ":" + month + ":" + day + ":" + hour + ":" + min + ":" + sec;

}
</script>
